package de.dreiroeders.fotokalender;

import java.io.File;
import java.util.Calendar;
import java.util.GregorianCalendar;

public class MyFussballBundesliga2 extends MyFussballBundesliga {

	public static void addMyFussballBundesliga2(FotoKalender cal) {
		// SPIELPLAN
		// 2. BUNDESLIGA
		// SAISON 2023/2024
		// 30.06.2023
		// ©DFL Deutsche Fußball Liga e.V.
		// SPIELPLAN 2. BUNDESLIGA
        addTermin(cal, 28, 7,28, 7,2023,"1 1 Hamburger SV FC Schalke 04");
        addTermin(cal, 29, 7,30, 7,2023," 1 3 1. FC Kaiserslautern FC St. Pauli");
        addTermin(cal, 29, 7,30, 7,2023," 1 4 Hannover 96 SV Elversberg");
        addTermin(cal, 29, 7,30, 7,2023," 1 5 SpVgg Greuther Fürth SC Paderborn 07");
        addTermin(cal, 29, 7,30, 7,2023," 1 6 F.C. Hansa Rostock 1. FC Nürnberg");
        addTermin(cal, 29, 7,30, 7,2023," 1 7 Eintracht Braunschweig Holstein Kiel");
        addTermin(cal, 29, 7,30, 7,2023," 1 8 VfL Osnabrück Karlsruher SC");
        addTermin(cal, 29, 7,30, 7,2023," 1 9 SV Wehen Wiesbaden 1. FC Magdeburg");
        // SPIELPLAN
        // 2. BUNDESLIGA
        // SAISON 2023/2024
        // 30.06.2023
        // ©DFL Deutsche Fußball Liga e.V.
        // Sämtliche Rechte an dem Spielplan liegen bei DFL Deutsche Fußball Liga e.V. 
        // Änderungen des Spielplans bleiben vorbehalten.
        // Alle weiteren Informationen zur Saison 2023/2024 unter bundesliga.de
        addTermin(cal, 29, 7,30, 7,2023,"1 2 Fortuna Düsseldorf Hertha BSC");
        addTermin(cal,  4, 8, 4, 8,2023,"2 11 Hertha BSC SV Wehen Wiesbaden");
        addTermin(cal, 19, 8,19, 8,2023,"3 19 Hamburger SV Hertha BSC");
        addTermin(cal, 26, 8,26, 8,2023,"4 29 Hertha BSC SpVgg Greuther Fürth");
        addTermin(cal,  2, 9, 2, 9,2023,"5 41 1. FC Magdeburg Hertha BSC");
        addTermin(cal, 17, 9,17, 9,2023,"6 47 Hertha BSC Eintracht Braunschweig");
        addTermin(cal, 24, 9,24, 9,2023,"7 57 Holstein Kiel Hertha BSC");
        addTermin(cal, 30, 9,30, 9,2023,"8 64 Hertha BSC FC St. Pauli");
        addTermin(cal,  8,10, 8,10,2023,"9 73 FC Schalke 04 Hertha BSC");
        addTermin(cal, 22,10,22,10,2023,"10 88 1. FC Nürnberg Hertha BSC");
        addTermin(cal, 27,10,29,10,2023,"11 92 Hertha BSC SC Paderborn 07");
        addTermin(cal,  3,11, 5,11,2023,"12 105 F.C. Hansa Rostock Hertha BSC");
        addTermin(cal, 10,11,12,11,2023,"13 110 Hertha BSC Karlsruher SC");
        addTermin(cal, 24,11,26,11,2023,"14 122 Hannover 96 Hertha BSC");
        addTermin(cal,  1,12, 3,12,2023,"15 128 Hertha BSC SV Elversberg");
        addTermin(cal,  8,12,10,12,2023,"16 138 1. FC Kaiserslautern Hertha BSC");
        addTermin(cal, 15,12,17,12,2023,"17 146 Hertha BSC VfL Osnabrück");
        addTermin(cal, 21, 1,21, 1,2024,"18 155 Hertha BSC Fortuna Düsseldorf");
        addTermin(cal, 26, 1,28, 1,2024,"19 171 SV Wehen Wiesbaden Hertha BSC");
        addTermin(cal, 31, 1,31, 1,2024,"38 290 Hertha BSC 1. FC Kaiserslautern");
        addTermin(cal,  3, 2, 3, 2,2024,"20 173 Hertha BSC Hamburger SV");
        addTermin(cal,  9, 2,11, 2,2024,"21 186 SpVgg Greuther Fürth Hertha BSC");
        addTermin(cal, 16, 2,16, 2,2024,"22 191 Hertha BSC 1. FC Magdeburg");
        addTermin(cal, 23, 2,25, 2,2024,"23 205 Eintracht Braunschweig Hertha BSC");
        addTermin(cal,  1, 3, 1, 3,2024,"24 209 Hertha BSC Holstein Kiel");
        addTermin(cal,  8, 3,10, 3,2024,"25 219 FC St. Pauli Hertha BSC");
        addTermin(cal, 17, 3,17, 3,2024,"26 226 Hertha BSC FC Schalke 04");
        addTermin(cal, 30, 3,31, 3,2024,"27 236 Hertha BSC 1. FC Nürnberg");
        addTermin(cal,  5, 4, 7, 4,2024,"28 246 SC Paderborn 07 Hertha BSC");
        addTermin(cal, 12, 4,14, 4,2024,"29 254 Hertha BSC F.C. Hansa Rostock");
        addTermin(cal, 19, 4,21, 4,2024,"30 264 Karlsruher SC Hertha BSC");
        addTermin(cal, 26, 4,28, 4,2024,"31 272 Hertha BSC Hannover 96");
        addTermin(cal,  5, 5, 5, 5,2024,"32 286 SV Elversberg Hertha BSC");
        addTermin(cal, 11, 5,11, 5,2024,"33 290 Hertha BSC 1. FC Kaiserslautern");
        addTermin(cal, 19, 5,19, 5,2024,"34 305 VfL Osnabrück Hertha BSC");
        
		if (cal.THIS_YEAR == 2024) {
			// 2.BUNDESLIGA START am Freitag 2. August 2024
			File herthaIco = new File("res/Hertha BSC.jpg");
			PersonalDate sp;
			sp = PersonalDate.create2BitmapsBackground(new File("res/FC Köln.jpg"), " ... ", new File("res/Hannover 96.jpg"), 0.8f, 0f, 2, 8, 2024);
			cal.mDates.addCalEvent(sp);
			sp = PersonalDate.create2BitmapsBackground(herthaIco, " ... ", new File("res/Hamburger SV.jpg"), 1f, 0f, 3, 8, 2024);
			cal.mDates.addCalEvent(sp);
			sp = PersonalDate.create2BitmapsBackground(new File("res/Schalke 04.jpg"), "? ... ", new File("res/Karlsruher SC.png"), 0.8f, 0.4f, 4, 8, 2024);
			cal.mDates.addCalEvent(sp);
		}

	}

	public static void addTermin(
			FotoKalender cal,
			int nDays,
			GregorianCalendar firstDay,
			GregorianCalendar lastDay,
			String strHeimIcoName,
			String strAuswIcoName,
			float factor
		) {
		int nWeekDay = Calendar.SATURDAY;
		float deltaY;
		if (nDays == 0) {
			deltaY = 0f;
		} else {
			nWeekDay = lastDay.get(Calendar.DAY_OF_WEEK);
			if      (nDays == 1 && nWeekDay == Calendar.WEDNESDAY) deltaY = -4f/9f;  // 4 Spiele am Dienstag
			else if (nDays == 1 && nWeekDay == Calendar.SUNDAY)    deltaY = -5f/8f;  // 5 Spiele am Samstag
			else if (nDays == 2 && nWeekDay == Calendar.SUNDAY)    deltaY = -(2*2+4)/9f; // 2 Spiele am Freitag + 4 Spiele am Samstag
			else												   deltaY = -nDays/2f;
		}
		File filHeim = new File("res/"+strHeimIcoName);
		File filAusw = new File("res/"+strAuswIcoName);
		if (firstDay.get(Calendar.MONTH) == lastDay.get(Calendar.MONTH)) {
			PersonalDate sp = PersonalDate.create2BitmapsBackground(filHeim, " : ", filAusw, factor, deltaY, lastDay);
			cal.mDates.addCalEvent(sp);
			for (int iD = 1; iD <= nDays; ++iD) {
				cal.mDates.addCalEvent01(PersonalDate.createDate("{0,date,EE} ", sp.getDate(), -iD, (byte)0));
			}
		} else {
			int n1 = 0;
			int n2 = 0;
			final int lDayIMth = lastDay.get(Calendar.DAY_OF_MONTH);
			for (int iD = 0; iD <= nDays; ++iD) {
				if (iD < lDayIMth) {
					n2 += getNSpielePerDay(nDays, nWeekDay-iD);
				} else {
					n1 += getNSpielePerDay(nDays, nWeekDay-iD);
				}
				assert(n1 > 0 && n2 > 0);
			}
			final int fDayIMth = firstDay.get(Calendar.DAY_OF_MONTH);
			float deltaY1 = Math.min(fDayIMth + nDays + deltaY, 31.25f) - fDayIMth;
			float deltaY2 = Math.max(deltaY, -lDayIMth+0.75f);
			float fac1 = factor * (float)Math.sqrt((float)n1/(n1+n2));
			float fac2 = factor * (float)Math.sqrt((float)n2/(n1+n2));
			PersonalDate sp = PersonalDate.create2BitmapsBackground(filHeim, " : ", filAusw, fac1, deltaY1, firstDay);
			cal.mDates.addCalEvent(sp);
			sp = PersonalDate.create2BitmapsBackground(filHeim, " : ", filAusw, fac2, deltaY2, lastDay);
			cal.mDates.addCalEvent(sp);
			for (int iD = 1; iD < nDays; ++iD) {
				cal.mDates.addCalEvent01(PersonalDate.createDate("{0,date,EE} ", sp.getDate(), -iD, (byte)0));
			}
		}
	}

	
	public static int getNSpielePerDay(int nDays, int nWeekDay1) {
		int nWeekDay = nWeekDay1;
		if (nWeekDay < 1) {
			nWeekDay += 7;
		}
		if (nDays == 1) {
			switch (nWeekDay) {
			    case Calendar.TUESDAY:  return 4;
				case Calendar.WEDNESDAY:return 5;
				case Calendar.SATURDAY: return 5;
				case Calendar.SUNDAY:   return 3;
				default:                return 1;
			}
		}
		if (nDays == 2) {
			switch (nWeekDay) {
				case Calendar.FRIDAY:   return 2;
				case Calendar.SATURDAY: return 4;
				case Calendar.SUNDAY:   return 3;
				default: 				return 1;
			}
		}
		return (9+nDays)/(nDays+1);
	}

}
